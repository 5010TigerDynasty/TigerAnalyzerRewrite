"use strict";var l=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var P=(e,t)=>{for(var n in t)l(e,n,{get:t[n],enumerable:!0})},g=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of A(t))!D.call(e,a)&&a!==n&&l(e,a,{get:()=>t[a],enumerable:!(i=v(t,a))||i.enumerable});return e};var w=e=>g(l({},"__esModule",{value:!0}),e);var O={};P(O,{checkUpdate:()=>N,installUpdate:()=>h,onUpdaterEvent:()=>p});module.exports=w(O);function T(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function s(e,t=!1){let n=T(),i=`_${n}`;return Object.defineProperty(window,i,{value:a=>(t&&Reflect.deleteProperty(window,i),e?.(a)),writable:!1,configurable:!0}),n}async function m(e,t={}){return new Promise((n,i)=>{let a=s(r=>{n(r),Reflect.deleteProperty(window,`_${o}`)},!0),o=s(r=>{i(r),Reflect.deleteProperty(window,`_${a}`)},!0);window.__TAURI_IPC__({cmd:e,callback:a,error:o,...t})})}async function u(e){return m("tauri",e)}async function f(e,t){return u({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function U(e,t,n){await u({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}async function d(e,t,n){return u({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:s(n)}}).then(i=>async()=>f(e,i))}async function _(e,t,n){return d(e,t,i=>{n(i),f(e,i.id).catch(()=>{})})}async function E(e,t){return d(e,null,t)}async function y(e,t){return _(e,null,t)}async function c(e,t){return U(e,void 0,t)}async function p(e){return E("tauri://update-status",t=>{e(t?.payload)})}async function h(){let e;function t(){e&&e(),e=void 0}return new Promise((n,i)=>{function a(o){if(o.error)return t(),i(o.error);if(o.status==="DONE")return t(),n()}p(a).then(o=>{e=o}).catch(o=>{throw t(),o}),c("tauri://update-install").catch(o=>{throw t(),o})})}async function N(){let e;function t(){e&&e(),e=void 0}return new Promise((n,i)=>{function a(r){return t(),n({manifest:r,shouldUpdate:!0})}function o(r){if(r.error)return t(),i(r.error);if(r.status==="UPTODATE")return t(),n({shouldUpdate:!1})}y("tauri://update-available",r=>{a(r?.payload)}).catch(r=>{throw t(),r}),p(o).then(r=>{e=r}).catch(r=>{throw t(),r}),c("tauri://update").catch(r=>{throw t(),r})})}
